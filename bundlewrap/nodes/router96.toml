hostname = "172.19.138.19"
bundles = [
    "bird",
    "isc-dhcp-server",
    "netdata",
    "unbound-with-knot",
    "voc2dmx",
]
groups = ["debian-bookworm"]

[metadata.bird]
static_routes = [
    "10.73.96.0/24",
]
[metadata.bird.bgp_neighbors.wg_c3voc_de]
local_as = 65096
local_ip = "10.9.96.2"
neighbor_as = 65000
neighbor_ip = "10.9.96.1"

[metadata.grub.cmdline_linux]
'net.ifnames' = 1

[metadata.interfaces.enp2s0]
ips = [
    "172.19.138.19/24"
]
dhcp = true

[metadata.interfaces.br-lan]
ips = [
    "10.73.0.254/16",
    "10.73.96.201/16",
]

[metadata.isc-dhcp-server.subnets.br-lan]
range_lower = "10.73.96.100"
range_higher = "10.73.96.199"
subnet = "10.73.0.0/16"
options.broadcast-address = "10.73.255.255"
options.domain-name-servers = "10.73.0.254"
options.domain-search = "lan.c3voc.de"
options.routers = "10.73.0.254"
options.subnet-mask = "255.255.0.0"

[metadata.netdata]
restrict-to = [
    "172.19.138.0/24", # kunsi home
]

[metadata.nftables]
forward."50-router" = [
    "ct state { related, established } accept",
    "iifname br-lan accept",
]
postrouting."50-router" = [
    "oifname enp2s0 masquerade",
]

[metadata.sysctl.options]
"net.ipv4.conf.all.forwarding" = "1"

[metadata.systemd-networkd.bridges.br-lan]
match = ["enp1s0f*"]

[metadata.systemd-networkd.wireguard.c3voc]
# pubkey encrypt$gAAAAABl_ZDMUb43-_6jS6prfS2UJ8ssbjgGe6bJ8g67kJSWolVD8vmgPiDBWXAPllDVF8q-q8PwhNm4hcbGLxo689HNQtWtnfFj1XdHXcaDs8jPvYLW_ZUxkmwoMmLIPm_wERRURpke
peer = "wg.c3voc.de:20096"
peer_pubkey = "!decrypt:encrypt$gAAAAABl_ZI9l68Y30J2l5ath5NmYwz6cCfKDXn9kG8BzfA_DggGrPI0_e2pnZMVfx1u2sysu28PcODRWsy1_HgTCnjW_uikuhX331cTaZ5eNFZG4xzoDCIy2e6F4dI3B6_2BxYwSl4E"
my_ip = "10.9.96.2/30"
my_port = 20096
privatekey = "!decrypt:encrypt$gAAAAABl_ZC1nT1IRu2Rr5Js8uVX2oPDOjsXhE1hMs4wtWoWXKCRIQeHpFmtXh3lsN6x1dJSu2pnCsNGxtQ-jYPOMBcVZ7tSE_rSnS7FCgPackGRx_3-yxu1AkiQXOmfXJ85POrEXdqO"

[metadata.unbound-with-knot]
threads = 4
cache_slabs = 4
primary = "!kee_user:ansible|router|knot secret"
primary_secret = "!kee_pass:ansible|router|knot secret"

[metadata.voc2dmx]
alert.brightness = 255
rainbow.brightness = 150

[metadata.voc2dmx.sacn]
target = "10.73.100.115"

[metadata.voc2dmx.lights]
tsss_led_par_rgbw = [1, 9, 17, 25, 33, 41, 49, 57]

# stairville_par_56 = [
#    1,
#    6,
#    11,
#    16,
#    21,
#    26,
# ]
